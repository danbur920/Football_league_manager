@page "/teams/{teamId:int}"

@using System.Net.Http
@using System_do_zarządzania_ligą_piłkarską.Shared.DTOs

@inject HttpClient Http
@inject NavigationManager Navigation

<h3>Szczegóły drużyny</h3>

<div class="button-container">
    <button class="btn btn-primary" @onclick="ShowPastMatches">Rozegrane mecze</button>
    <button class="btn btn-primary" @onclick="ShowFutureMatches">Zaplanowane mecze</button>
    <button class="btn btn-primary" @onclick="ShowTable">Tabela</button>
    <button class="btn btn-primary" @onclick="ShowLineup">Skład</button>
    <button class="btn btn-secondary" @onclick="GoBack">Wróć</button>
</div>

@if (team != null)
{
    <div>
        <h4>@team.Name</h4>  
    </div>
}
else
{
    <p>Ładowanie...</p>
}

@code {
    [Parameter]
    public int teamId { get; set; }
    public int leagueId { get; set; }
    private TeamDTO team;

    protected override async Task OnInitializedAsync()
    {
        team = await Http.GetFromJsonAsync<TeamDTO>($"api/teams/{teamId}");
    }

    private void ShowPastMatches()
    {
        Navigation.NavigateTo($"/teams/{teamId}/past-matches");
    }

    private void ShowFutureMatches()
    {
        Navigation.NavigateTo($"/teams/{teamId}/future-matches");
    }

    private void ShowTable()
    {
        Navigation.NavigateTo($"/leagues/{team.LeagueId}/table");
    }

    private void ShowLineup()
    {
        Navigation.NavigateTo($"/teams/{teamId}/lineup");
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/teams");
    }
}
