@page "/leagues/{leagueId:int}"
@using System.Net.Http
@using System_do_zarządzania_ligą_piłkarską.Shared.DTOs
@inject HttpClient Http
@inject NavigationManager Navigation


<h3>Szczegóły Ligi</h3>

<div class="button-container">
    <button class="btn btn-primary" @onclick="ShowInformation">Informacje</button>
    <button class="btn btn-primary" @onclick="ShowTable">Tabela</button>
    <button class="btn btn-primary" @onclick="ShowScorers">Strzelcy</button>
    <button class="btn btn-secondary" @onclick="GoBack">Wróć</button>
</div>

@if (league != null)
{
    <div>
        <h4>@league.Name</h4>
    </div>
}
else
{
    <p>Ładowanie...</p>
}

@code {
    [Parameter]
    public int leagueId { get; set; }
    private LeagueDTO league;

    protected override async Task OnInitializedAsync()
    {
        league = await Http.GetFromJsonAsync<LeagueDTO>($"api/leagues/{leagueId}");
    }

    private void ShowInformation()
    {
        Navigation.NavigateTo($"/leagues/{leagueId}");
    }

    private void ShowTable()
    {
        Navigation.NavigateTo($"/leagues/{leagueId}/table");
    }

    private void ShowScorers()
    {
        Navigation.NavigateTo($"/leagues/{leagueId}/scorers");
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/leagues");
    }
}
